<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Android Kode Editor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap');
        
        body {
            background-color: #09090b;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;
        }

        .s23-chassis {
            width: 340px;
            height: 720px;
            background: black;
            border-radius: 44px;
            border: 8px solid #27272a;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .punch-hole {
            position: absolute;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 16px;
            height: 16px;
            background: #18181b;
            border-radius: 50%;
            z-index: 50;
            border: 1px solid #27272a;
        }

        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .code-input {
            font-family: 'Fira Code', monospace;
            background: transparent;
            color: #93c5fd;
            resize: none;
            outline: none;
            border: none;
            width: 100%;
            height: 100%;
            font-size: 12px;
            line-height: 1.5;
        }
    </style>
</head>
<body>

    <div class="s23-chassis ring-2 ring-zinc-700">
        <div class="punch-hole"></div>

        <!-- Status Bar -->
        <div class="h-10 w-full flex items-center justify-between px-7 pt-3 text-[11px] font-bold text-zinc-300 z-40">
            <span id="clock">12:00</span>
            <div class="flex items-center gap-2">
                <i data-lucide="wifi" class="w-3 h-3"></i>
                <i data-lucide="battery" class="w-3 h-3"></i>
            </div>
        </div>

        <!-- Header -->
        <header class="flex items-center justify-between px-5 py-3 bg-zinc-900/90 border-b border-zinc-800">
            <div class="flex items-center gap-2">
                <div class="p-1.5 bg-blue-600 rounded-lg shadow-lg">
                    <i data-lucide="code" class="w-4 h-4 text-white"></i>
                </div>
                <span class="text-[10px] font-black uppercase tracking-widest text-zinc-300">Android Kode Editor</span>
            </div>
            <button onclick="runCode()" class="px-4 py-1.5 bg-green-500 text-black rounded-full text-[10px] font-bold active:scale-95 transition-all">
                KJØR
            </button>
        </header>

        <!-- Workspace -->
        <main id="workspace" class="flex-1 overflow-hidden relative bg-zinc-950 flex flex-col">
            <!-- Editor View -->
            <div id="view-editor" class="flex-1 flex">
                <div class="w-10 bg-zinc-900/30 border-r border-zinc-800 flex flex-col items-center pt-4 text-[10px] text-zinc-600 font-mono">
                    <script>
                        for(let i=1; i<=30; i++) document.write(`<span class="h-5">${i}</span>`);
                    </script>
                </div>
                <textarea id="editor" class="code-input p-4" spellcheck="false"></textarea>
            </div>

            <!-- Terminal View -->
            <div id="view-terminal" class="hidden flex-1 bg-black p-5 overflow-y-auto font-mono text-[11px] leading-relaxed text-emerald-400">
                <div class="text-zinc-500 mb-4 border-b border-zinc-800 pb-2">Lokal Terminal [v1.0]</div>
                <div id="terminal-output"></div>
            </div>

            <!-- SSH View -->
            <div id="view-ssh" class="hidden flex-1 p-6 space-y-6">
                <div class="flex items-center gap-3 text-purple-400">
                    <i data-lucide="shield" class="w-5 h-5"></i>
                    <h2 class="text-xs font-bold uppercase tracking-widest">SSH</h2>
                </div>
                <div class="space-y-4">
                    <input id="ssh-host" class="w-full bg-zinc-900 border border-zinc-800 rounded-xl p-3 text-sm text-white outline-none" placeholder="Host IP">
                    <input id="ssh-user" class="w-full bg-zinc-900 border border-zinc-800 rounded-xl p-3 text-sm text-white outline-none" placeholder="Brukernavn">
                    <button onclick="saveSSH()" class="w-full bg-purple-600 text-white font-bold py-3 rounded-xl text-xs active:scale-95">LAGRE & KOBLE TIL</button>
                </div>
            </div>
        </main>

        <!-- Navigation -->
        <nav class="h-20 grid grid-cols-3 bg-zinc-900/95 border-t border-zinc-800 px-2 pb-4">
            <button onclick="switchTab('editor')" class="flex flex-col items-center justify-center gap-1 text-blue-500">
                <i data-lucide="code" class="w-5 h-5"></i>
                <span class="text-[8px] font-black uppercase">Kode</span>
            </button>
            <button onclick="switchTab('terminal')" class="flex flex-col items-center justify-center gap-1 text-zinc-600">
                <i data-lucide="terminal" class="w-5 h-5"></i>
                <span class="text-[8px] font-black uppercase">Logg</span>
            </button>
            <button onclick="switchTab('ssh')" class="flex flex-col items-center justify-center gap-1 text-zinc-600">
                <i data-lucide="shield" class="w-5 h-5"></i>
                <span class="text-[8px] font-black uppercase">SSH</span>
            </button>
        </nav>

        <div class="h-1.5 w-24 bg-zinc-800 mx-auto mb-2 rounded-full"></div>
    </div>

    <script>
        // Init Lucide Icons
        lucide.createIcons();

        // Klokke funksjon
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }
        setInterval(updateClock, 1000);
        updateClock();

        // LocalStorage Håndtering
        const editor = document.getElementById('editor');
        const sshHost = document.getElementById('ssh-host');
        const sshUser = document.getElementById('ssh-user');

        // Last inn lagret data
        window.onload = () => {
            editor.value = localStorage.getItem('droidcode_script') || '// Skriv JS her...';
            sshHost.value = localStorage.getItem('ssh_host') || '';
            sshUser.value = localStorage.getItem('ssh_user') || '';
        };

        // Lagre data ved endring
        editor.addEventListener('input', () => {
            localStorage.setItem('droidcode_script', editor.value);
        });

        function saveSSH() {
            localStorage.setItem('ssh_host', sshHost.value);
            localStorage.setItem('ssh_user', sshUser.value);
            logToTerminal(`SSH: Innstillinger lagret for ${sshUser.value}@${sshHost.value}`, 'system');
            switchTab('terminal');
        }

        // Tab switching
        function switchTab(tab) {
            document.getElementById('view-editor').classList.add('hidden');
            document.getElementById('view-terminal').classList.add('hidden');
            document.getElementById('view-ssh').classList.add('hidden');
            
            document.getElementById('view-' + tab).classList.remove('hidden');
            
            // Oppdater farge på knapper (enkel logikk)
            const navButtons = document.querySelectorAll('nav button');
            navButtons.forEach(btn => btn.classList.replace('text-blue-500', 'text-zinc-600'));
            event.currentTarget.classList.replace('text-zinc-600', 'text-blue-500');
        }

        // Terminal Logikk
        function logToTerminal(msg, type = 'log') {
            const output = document.getElementById('terminal-output');
            const entry = document.createElement('div');
            entry.className = 'mb-2';
            const color = type === 'error' ? 'text-red-400' : (type === 'system' ? 'text-blue-400' : 'text-emerald-400');
            entry.innerHTML = `<span class="text-zinc-700 mr-2">${new Date().toLocaleTimeString()}</span><span class="${color}">${msg}</span>`;
            output.appendChild(entry);
            document.getElementById('view-terminal').scrollTop = output.scrollHeight;
        }

        // Kjøring av kode
        async function runCode() {
            switchTab('terminal');
            logToTerminal("Initialiserer lokalt script...", "system");
            
            const originalLog = console.log;
            console.log = (m) => logToTerminal(m, 'log');

            try {
                const blob = new Blob([editor.value], { type: 'text/javascript' });
                const url = URL.createObjectURL(blob);
                await import(url);
                URL.revokeObjectURL(url);
            } catch (err) {
                logToTerminal(err.message, 'error');
            }
            
            console.log = originalLog;
        }
    </script>
</body>
</html>
